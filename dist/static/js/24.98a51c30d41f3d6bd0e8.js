webpackJsonp([24],{168:function(e,t,a){"use strict";function r(e){var t,a;return t=new RegExp("[; ]"+e+"=([^\\s;]*)"),a=(" "+document.cookie).match(t),e&&a?unescape(a[1]):""}a.d(t,"a",function(){return i});var i=function(e,t,a,i,o,s,n,d){var c={page:{pageInfo:{pageName:e,lob:t,sessionID:""!==r("sessionID")?r:"",platform:a},category:{pageType:i,primaryCategory:o,subCategory1:s,subCategory2:n,subCategory3:d}}};"undefined"!=typeof yt_adobe&&"undefined"!=typeof _satellite?yt_adobe.addDigitalData(c):"undefined"!=typeof yt_adobe&&"undefined"==typeof _satellite&&("production"==="production".toString()?yt_adobe.addHeaderScript("true","PROD"):yt_adobe.addHeaderScript("true"),yt_adobe.addDigitalData(c),yt_adobe.addFooterScript()),"undefined"!=typeof yt_adobe&&yt_adobe.track("virtualPageView",c)}},191:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(57),i=a(22),o=a(171),s=a(23),n=a(168),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};t.default={props:["openDebitDialog","debitCardOption","totalAmountPayble","redeemedAmountPayble","superPNR"],components:{LoaderView:function(){return a.e(15).then(a.bind(null,170))},paymentError:function(){return a.e(16).then(a.bind(null,172))}},computed:d({},a.i(r.b)({getUserInfo:i.j})),data:function(){return{address:"",city:"",state_code:"",pin_code:"",number:"",timeout:1500,snackbarText:"",snackbar:!1,y:"bottom",cardAddressErrorMsg:void 0,cardCityErrorMsg:void 0,cardStateErrorMsg:void 0,cardPinErrorMsg:void 0,cardPhoneErrorMsg:void 0,selectedTelephoneCode:"+91",phone:"",isInternationalCard:!1,debitDialog:!1,DebitVisible:!0,cardMaxLength:"3",selectedCardForValidation:!1,cardCVVErrorMsg:void 0,selectedCard:{},totalPrice:0,productCode:"pwa_bus",redeemedamount:0,cardExpiryDateErrorMsg:void 0,cardNumberErrorMsg:void 0,cardHolderErrorMsg:void 0,ajaxLoadingDialog:!1,cardImg:"",createOrderResponse:{},paymentOpt:{DebitCardDetails:{number:"",name:"",mm:"",yy:"",cvv:"",payop:"dc"}},showLoader:!1,paymentErrorMessage:{},showPaymentDialog:!1}},created:function(){this.createOrderResponse=this.superPNR},watch:{openDebitDialog:function(){this.debitDialog=this.openDebitDialog,this.totalPrice=this.totalAmountPayble,this.redeemedamount=this.redeemedAmountPayble,this.openDebitDialog&&(this.createOrderResponse=this.superPNR,this.selectedCardForValidation=!1,this.cardImg="",this.paymentOpt={DebitCardDetails:{number:"",name:"",mm:"",yy:"",cvv:"",payop:"dc"}}),a.i(n.a)("yt:bus:dom:checkout:payment:debit card","bus","ios/pwa","business","bus checkout","domestic bus","payment","debit card")},number:function(e){this.paymentOpt.DebitCardDetails.number=this.number;var t=JSON.parse(localStorage.getItem("busReviewRequest"));this.paymentOpt.DebitCardDetails.number,this.productCode,t.superPNR}},methods:{navigateToSrp:function(){s.a.push({name:"BusSRP"})},checkMonthLength:function(){2==this.paymentOpt.DebitCardDetails.mm.length&&this.$refs.expiryYrs.focus()},closeDebitDialog:function(){this.$emit("closeDebitDialog",!1)},validateCardRegex:function(e){return new RegExp(e.cardValidations.regex).test(this.paymentOpt.DebitCardDetails.number.replace(/\s/g,""))},checkCardDetails:function(){var e=this.debitCardOption.cardTypes.findIndex(this.validateCardRegex);e>=0?(this.selectedCard=this.debitCardOption.cardTypes[e].cardValidations,this.cardMaxLength=this.selectedCard.cvvLength,this.selectedCardForValidation=!0,this.cardImg=this.debitCardOption.cardTypes[e].logoURL):(this.selectedCardForValidation=!1,this.cardImg="",this.cardMaxLength="3")},validateName:function(){if(""==this.paymentOpt.DebitCardDetails.name){this.cardHolderErrorMsg="Enter Card Holder Name";var e=this;return setTimeout(function(){e.cardHolderErrorMsg=void 0},3e3),!1}return this.cardHolderErrorMsg=void 0,!0},validateExpiryDate:function(){if(this.cardExpiryDateErrorMsg=""==this.paymentOpt.DebitCardDetails.mm||parseInt(this.paymentOpt.DebitCardDetails.mm)>12||""==this.paymentOpt.DebitCardDetails.yy?"Invalid Expiry Date":parseInt(this.paymentOpt.DebitCardDetails.yy)>parseInt((new Date).getFullYear().toString().substr(-2))?void 0:parseInt(this.paymentOpt.DebitCardDetails.yy)==parseInt((new Date).getFullYear().toString().substr(-2))&&parseInt(this.paymentOpt.DebitCardDetails.mm)>parseInt(("0"+((new Date).getMonth()+1)).slice(-2))?void 0:"Invalid Expiry Date",void 0==this.cardExpiryDateErrorMsg)return!0;var e=this;return setTimeout(function(){e.cardExpiryDateErrorMsg=void 0},3e3),!1},validateCVV:function(){if(this.selectedCard.cvv&&"optional"==this.selectedCard.cvv)return!0;if(this.cardCVVErrorMsg=""==this.paymentOpt.DebitCardDetails.cvv?"Enter CVV number":parseInt(this.paymentOpt.DebitCardDetails.cvv)>=0&&this.paymentOpt.DebitCardDetails.cvv.length===parseInt(this.selectedCard.cvvLength)?void 0:"Enter Correct CVV no",void 0==this.cardCVVErrorMsg)return!0;var e=this;return setTimeout(function(){e.cardCVVErrorMsg=void 0},3e3),!1},submitPay:function(){if(!this.selectedCardForValidation){this.cardNumberErrorMsg="Enter correct card details";var e=this;return setTimeout(function(){e.cardNumberErrorMsg=void 0},3e3),!1}if(this.cardNumberErrorMsg=void 0,!(this.validateName()&&this.validateExpiryDate()&&this.validateCVV()))return!1;this.paySwiftCall()},paySwiftCall:function(){var e=this;this.showLoader=!0,Vue.http.headers.common["Content-Type"]="application/json",Vue.http.headers.common["YT-CHANNEL"]="PWA",Vue.http.headers.common["YT-TENANT-CODE"]="pwa_bus",Vue.http.options.emulateJSON=!1;var t=JSON.parse(localStorage.getItem("userInfo")),r=JSON.parse(localStorage.getItem("busReviewRequest")),i=localStorage.getItem("departDate"),s=this.debitCardOption.cardTypes.findIndex(this.validateCardRegex),n={patternMatch:new RegExp("^[1-9][0-9]?$"),paymentModeType:"",paymentAmount:this.totalPrice-this.redeemedamount,tdate:i,cno:this.paymentOpt.DebitCardDetails.number.replace(/\s/g,""),cardType:this.debitCardOption.cardTypes[s].code,cardHolderName:this.paymentOpt.DebitCardDetails.name,cardHolderNumber:this.paymentOpt.DebitCardDetails.number,cardMM:this.paymentOpt.DebitCardDetails.mm,cardYY:this.paymentOpt.DebitCardDetails.yy,cardCvv:this.paymentOpt.DebitCardDetails.cvv,payOptionType:this.paymentOpt.DebitCardDetails.payop,productCode:"pwa_bus"},d={amountDisplayed:n.paymentAmount,eCashRedemed:this.redeemedamount,appVersion:"1.0",client:"APP",discount:0,discountingStatus:!1,email:t.email,merchant:"yatra",mob:t.mobile,otherDiscountingStatus:!1,paymentMode:"FULL",paymentOptionParameters:"tdate="+n.tdate+"|merchant=yatra|product="+n.productCode+"|payop="+n.payOptionType+"|previousPayOp="+n.payOptionType+"|cno="+n.cno+"|ctype="+n.cardType+"|isCardInternational=false|address_check_rdo=Domestic|cardholder_name="+n.cardHolderName+"|cexpy=20"+n.cardYY+"|cexpm="+n.cardMM+"|ccsc="+n.cardCvv+"|client=APP|uuid="+localStorage.getItem("UUID"),product:n.productCode,promoCode:JSON.parse(localStorage.getItem("promoCodePayment")).code,promoType:JSON.parse(localStorage.getItem("promoCodePayment")).type,superPnr:r.superPNR,ttid:parseInt("11"+r.superPNR),uuid:localStorage.getItem("UUID"),amountToRedeem:this.redeemedamount};Vue.http.options.emulateJSON=!0,this.$http.post("https://www.yatra.com/PaySwift/payNow",d).then(function(t){e.showLoader=!1,e.showPaymentDialog=!1,t.body&&t.body.rurl?a.i(o.a)(t.body):t.body&&Object.keys(t.body.redirectMap)?(e.paymentErrorMessage=t.body.redirectMap.errMsg||"Oops, we seem to have temporary hiccup. We apologise for the inconvenience caused and request you to try again.",e.showPaymentDialog=!0):e.navigateToSrp()}).catch(function(t){e.showLoader=!1,e.showPaymentDialog=!1,setTimeout(function(){e.paymentErrorMessage="Oops, we seem to have temporary hiccup. We apologise for the inconvenience caused and request you to try again.",e.showPaymentDialog=!0},2e3)})},cardSpace:function(e){e=e||window.event;var t=e.which?e.which:e.keyCode;if(!(t>31&&(t<48||t>57)||this.paymentOpt.DebitCardDetails.number.replace(/\s/g,"").length>=19)){var a=this.paymentOpt.DebitCardDetails.number.replace(/\s/g,"");return 0!=a.length&&a.length%4==0&&(this.paymentOpt.DebitCardDetails.number+=" "),!0}e.preventDefault()},onlyNumeric:function(e,t){var a=new RegExp("^[0-9]+$"),r=String.fromCharCode(event.charCode?event.charCode:event.which);if(!a.test(r))return event.preventDefault(),!1},checkCardPaste:function(e){var t=this;setTimeout(function(){var a=e.target.value.replace(/[^0-9\.]+/g,"").substring(0,16).replace(/(.{4})/g,"$1 ").trim();t.paymentOpt.DebitCardDetails.number=a,e.preventDefault(),e.stopPropagation()},10)}}}},227:function(e,t,a){t=e.exports=a(152)(!0),t.push([e.i,".pricefixed[data-v-0d87df94]{position:fixed;bottom:0;width:100%;text-align:center;background-color:#f44336;height:43px;font-size:14px;font-weight:700}.pricefixed .btn[data-v-0d87df94]{font-size:14px;margin-top:5px}.errorMsg[data-v-0d87df94]{margin-top:-2px;margin-bottom:5px;color:#f44336}.img-res[data-v-0d87df94]{right:20px;top:10px;width:14%;height:auto}.cvv[data-v-0d87df94]{width:25%;top:11px;right:10px}","",{version:3,sources:["F:/bus/src/components/busPayment/DebitCard.vue"],names:[],mappings:"AACA,6BACK,eAAgB,AAChB,SAAU,AACV,WAAY,AACZ,kBAAmB,AACnB,yBAA0B,AAC1B,YAAa,AACb,eAAgB,AAChB,eAAkB,CACtB,AACD,kCACK,eAAe,AACf,cAAe,CACnB,AACD,2BACG,gBAAgB,AAChB,kBAAkB,AAClB,aAAe,CACjB,AACD,0BACK,WAAY,AACZ,SAAU,AACV,UAAW,AACX,WAAa,CACjB,AACD,sBACK,UAAW,AACX,SAAU,AACV,UAAY,CAChB",file:"DebitCard.vue",sourcesContent:["\n.pricefixed[data-v-0d87df94] {\n     position: fixed;\n     bottom: 0;\n     width: 100%;\n     text-align: center;\n     background-color: #f44336;\n     height: 43px;\n     font-size: 14px;\n     font-weight: bold;\n}\n.pricefixed .btn[data-v-0d87df94]{\n     font-size:14px;\n     margin-top:5px;\n}\n.errorMsg[data-v-0d87df94]{\n   margin-top:-2px;\n   margin-bottom:5px;\n   color: #f44336;\n}\n.img-res[data-v-0d87df94] {\n     right: 20px;\n     top: 10px;\n     width: 14%;\n     height: auto;\n}\n.cvv[data-v-0d87df94] {\n     width: 25%;\n     top: 11px;\n     right: 10px;\n}\n"],sourceRoot:""}])},259:function(e,t,a){var r=a(227);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(153)("2ec1b651",r,!0,{})},290:function(e,t,a){function r(e){a(259)}var i=a(56)(a(191),a(311),r,"data-v-0d87df94",null);e.exports=i.exports},311:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{fullscreen:"",transition:"dialog-bottom-transition",overlay:!1},model:{value:e.debitDialog,callback:function(t){e.debitDialog=t},expression:"debitDialog"}},[a("v-toolbar",{staticClass:"white cd_fixed_header",attrs:{dark:""}},[a("v-btn",{staticStyle:{"margin-left":"0px"},attrs:{icon:"",dark:""},nativeOn:{click:function(t){return e.closeDebitDialog(t)}}},[a("v-icon",{staticClass:"cl_white_back payment_back"},[e._v("arrow_back")])],1),e._v(" "),a("v-toolbar-title",{staticClass:"cd_header_white header_white"},[e._v("Debit Card")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-toolbar-items",[a("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){return e.closeCreditDialog(t)}}})],1)],1),e._v(" "),e.DebitVisible?a("v-container",{staticClass:"p20 paycard bg-white",attrs:{id:"debitcard"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",prel:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.number,expression:"number"}],attrs:{id:"input1_dc",type:"text",maxlength:"30",autocomplete:"off",name:"cc-number",placeholder:"Card Number"},domProps:{value:e.number},on:{keypress:function(t){e.cardSpace(t)},paste:e.checkCardPaste,blur:e.checkCardDetails,input:function(t){t.target.composing||(e.number=t.target.value)}}}),e._v(" "),""!=e.cardImg?a("img",{staticClass:"pabs img-res",attrs:{src:"/pwa/bus/static/img/icons/"+e.cardImg+".png"}}):e._e()]),e._v(" "),e.cardNumberErrorMsg?a("v-flex",{attrs:{xs12:"",errorMsg:""}},[e._v(e._s(e.cardNumberErrorMsg))]):e._e()],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentOpt.DebitCardDetails.name,expression:"paymentOpt.DebitCardDetails.name"}],attrs:{id:"input2_dc",autocomplete:"off",autocapitalize:"none",autocorrect:"off",name:"name",tabindex:"0",placeholder:"Name On Card"},domProps:{value:e.paymentOpt.DebitCardDetails.name},on:{input:function(t){t.target.composing||e.$set(e.paymentOpt.DebitCardDetails,"name",t.target.value)}}})]),e._v(" "),e.cardHolderErrorMsg?a("v-flex",{attrs:{xs12:"",errorMsg:""}},[e._v(e._s(e.cardHolderErrorMsg))]):e._e()],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs7:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentOpt.DebitCardDetails.mm,expression:"paymentOpt.DebitCardDetails.mm"}],staticClass:"flex-3 br-0",attrs:{id:"expirationMonth_dc",maxlength:"2",placeholder:"MM",autocomplete:"cc-exp-month"},domProps:{value:e.paymentOpt.DebitCardDetails.mm},on:{keyup:e.checkMonthLength,keypress:e.onlyNumeric,input:function(t){t.target.composing||e.$set(e.paymentOpt.DebitCardDetails,"mm",t.target.value)}}}),e._v(" "),a("span",{staticClass:"flex-3 slash"},[e._v("/")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentOpt.DebitCardDetails.yy,expression:"paymentOpt.DebitCardDetails.yy"}],ref:"expiryYrs",staticClass:"flex-3 bl-0",attrs:{id:"expirationYear_dc",maxlength:"2",placeholder:"YY",autocomplete:"cc-exp-year"},domProps:{value:e.paymentOpt.DebitCardDetails.yy},on:{keypress:e.onlyNumeric,input:function(t){t.target.composing||e.$set(e.paymentOpt.DebitCardDetails,"yy",t.target.value)}}})]),e._v(" "),a("v-flex",{attrs:{xs4:"","offset-xs1":"",prel:""}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.paymentOpt.DebitCardDetails.cvv,expression:"paymentOpt.DebitCardDetails.cvv"}],attrs:{id:"cvv_dc",type:"password",placeholder:"CVV",autocomplete:"cc-exp-year",maxlength:e.cardMaxLength},domProps:{value:e.paymentOpt.DebitCardDetails.cvv},on:{keypress:e.onlyNumeric,input:function(t){t.target.composing||e.$set(e.paymentOpt.DebitCardDetails,"cvv",t.target.value)}}}),e._v(" "),a("img",{staticClass:"pabs cvv",attrs:{src:"/pwa/bus/static/img/icons/cvc_hint.png"}})])],1),e._v(" "),a("v-layout",{attrs:{row:"",wrap:""}},[e.cardExpiryDateErrorMsg?a("v-flex",{attrs:{xs8:"",errorMsg:""}},[e._v(e._s(e.cardExpiryDateErrorMsg))]):e._e(),e._v(" "),e.cardCVVErrorMsg?a("v-flex",{attrs:{xs4:"","offset-xs8":"",errorMsg:""}},[e._v(e._s(e.cardCVVErrorMsg))]):e._e()],1)],1):e._e(),e._v(" "),a("v-snackbar",{staticClass:"snacktxt",attrs:{timeout:e.timeout,bottom:"bottom"===e.y},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n         "+e._s(e.snackbarText)+"\n         "),a("v-btn",{staticClass:"txt-ff",attrs:{flat:""},nativeOn:{click:function(t){e.snackbar=!1}}},[e._v("Close")])],1),e._v(" "),e.showLoader?a("div",{staticClass:"ajax-loader"},[a("div",{staticClass:"sk-wave"},[a("div",{staticClass:"sk-rect sk-rect1"}),e._v(" "),a("div",{staticClass:"sk-rect sk-rect2"}),e._v(" "),a("div",{staticClass:"sk-rect sk-rect3"}),e._v(" "),a("div",{staticClass:"sk-rect sk-rect4"}),e._v(" "),a("div",{staticClass:"sk-rect sk-rect5"})])]):e._e(),e._v(" "),a("div",{staticClass:"pricefixed"},[a("button",{staticClass:"btn red",on:{click:function(t){return t.stopPropagation(),e.submitPay(t)}}},[e._v("PROCEED TO PAY ₹"+e._s(e.totalPrice-e.redeemedamount))])]),e._v(" "),a("payment-error",{attrs:{showPaymentDialog:e.showPaymentDialog,paymentErrorMessage:e.paymentErrorMessage},on:{closePaymentError:function(t){e.showPaymentDialog=!1}}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=24.98a51c30d41f3d6bd0e8.js.map